function fireApi(){const e=document.getElementById("download-link").innerHTML;let t=new XMLHttpRequest;t.onreadystatechange=function(){try{if(t.readyState===XMLHttpRequest.DONE)if(200===t.status){const n=/^(ip|uag|loc)=(.*)$/gm;let o=n.exec(t.responseText),c={};for(;null!=o;)c[o[1]]=o[2],o=n.exec(t.responseText);postInfo("https://pure-sierra-04823.herokuapp.com/dsca/api/c",{referer:window.location.href,origin:c.ip,country:c.loc,user_agent:c.uag,destination:e},e)}else console.log("An error fetching from cf")}catch(e){console.log("caught error",e)}},t.open("GET","https://www.cloudflare.com/cdn-cgi/trace/"),t.send()}function postInfo(e,t,n){let o=new XMLHttpRequest;o.onreadystatechange=function(){try{o.readyState,XMLHttpRequest.DONE}catch(e){console.log("caught error posting",e)}},o.open("POST",e),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(t))}function fallback(e){window.location.href=e}
