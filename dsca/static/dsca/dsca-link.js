function fireApi(){const e=document.getElementById("download-link").innerHTML;let t=new XMLHttpRequest;t.onreadystatechange=(()=>{try{if(t.readyState===XMLHttpRequest.DONE)if(200===t.status){const o=/^(ip|uag|loc)=(.*)$/gm;let n=o.exec(t.responseText),r={};for(;null!=n;)r[n[1]]=n[2],n=o.exec(t.responseText);postInfo("https://pure-sierra-04823.herokuapp.com/dsca/api/c",{referer:window.location.href,origin:r.ip,country:r.loc,user_agent:r.uag,destination:e},e)}else console.log("An error fetching from cf")}catch(e){console.log("caught error",e)}}),t.open("GET","https://www.cloudflare.com/cdn-cgi/trace/"),t.send()}function postInfo(e,t,o){let n=new XMLHttpRequest;n.onreadystatechange=(()=>{try{n.readyState,XMLHttpRequest.DONE}catch(e){console.log("caught error posting",e)}}),n.open("POST",e),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}function fallback(e){window.location.href=e}
